<block-ui message="Loading...">
</block-ui>

<!-- <div class="pl-5">
    <a routerLink="/tools" class="d-flex align-items-center"><mat-icon class="mr-1 default-icon">keyboard_arrow_left</mat-icon><span>Tools</span></a>
</div> -->

<h3 class="mb-3 pl-5 mt-3" id="heading">
    Set up Business
</h3>
<!-- <mat-divider class="ml-5 mr-5"></mat-divider> -->
<div class="ml-5 mr-5">
    <app-alert [message]="message" [type]="type" id="alert">
    </app-alert>
</div>

<div class="pl-5 pr-5 pb-5">
    <form [formGroup]="businessForm">
        <div class="form-group row">
            <div class="col-xl-3">
                <div class="row">
                    <div class="col-xl-12 d-flex align-items-center ">
                        <app-image-upload></app-image-upload>
                    </div>
        
                    <!-- Phone  -->
                    <div class="col-xl-12 d-flex align-items-center">
                        <mat-form-field [appearance]="apperance" class="full-width">
                            <mat-label>Phone</mat-label>
                            <input matInput placeholder="Phone" type="tel" formControlName="phone">
                        </mat-form-field>
                    </div>
        
                    <!-- Mobile  -->
                    <div class="col-xl-12 d-flex align-items-center">
                        <mat-form-field [appearance]="apperance" class="full-width">
                            <mat-label>Mobile</mat-label>
                            <input matInput placeholder="Mobile" type="tel" formControlName="mobile">
                        </mat-form-field>
                    </div>
        
                    <!-- Email id  -->
                    <div class="col-xl-12 d-flex align-items-center">
                        <mat-form-field [appearance]="apperance" class="full-width">
                            <mat-label>Email</mat-label>
                            <input matInput placeholder="Email" required formControlName="emailId">
                            <mat-error *ngIf="businessForm.get('emailId').hasError('required')">
                                Email is required.
                            </mat-error>
                            <mat-error *ngIf="businessForm.get('emailId').hasError('pattern')">
                                Please enter a valid email address.
                            </mat-error>
                        </mat-form-field>
                    </div>
        
                    <!-- Website  -->
                    <div class="col-xl-12 d-flex align-items-center">
                        <mat-form-field [appearance]="apperance" class="full-width">
                            <mat-label>Website</mat-label>
                            <input matInput placeholder="Website" formControlName="website">
                            <mat-error *ngIf="businessForm.get('website').touched && businessForm.get('website').hasError('pattern')">
                                Please enter a valid website address.
                            </mat-error>
                        </mat-form-field>
                    </div>

                    <!-- Fax  -->
                    <div class="col-xl-12 d-flex align-items-center">
                        <mat-form-field [appearance]="apperance" class="full-width">
                            <mat-label>Fax</mat-label>
                            <input matInput placeholder="Fax" type="tel" formControlName="fax">
                        </mat-form-field>
                    </div>
                </div>
            </div>
            <div class="col-xl-6 bg-white">
                <div class="row mt-3 pb-2 pl-3 pr-3">
                    <!-- Business Name  -->
                    <div class="col-xl-12 text-right">
                        <span class="required">Required</span>
                    </div>
                    <div class="col-xl-12 d-flex align-items-center">
                        
                        <mat-form-field [appearance]="apperance" class="full-width">
                            <!-- <mat-label>Business Name</mat-label> -->
                            <input matInput placeholder="Business Name" required formControlName="businessName">
                            <mat-error *ngIf="businessForm.get('businessName').hasError('required')">
                                Business Name is required.
                            </mat-error>
                            <mat-hint>Short Name of this Business</mat-hint>
                        </mat-form-field>
                    </div>
        
                    <!-- Business Registration Name  -->
                    <div class="col-xl-12 d-flex align-items-center">
                        <mat-form-field [appearance]="apperance" class="full-width">
                            <!-- <mat-label>Business Registration Name</mat-label> -->
                            <input matInput placeholder="Business Registration Name" formControlName="businessRegistrationName">
                        </mat-form-field>
                    </div>
        
                    <!-- Business Registration Number  -->
                    <div class="col-xl-12 d-flex align-items-center">
                        <mat-form-field [appearance]="apperance" class="full-width">
                            <!-- <mat-label>Business Registration Number</mat-label> -->
                            <input matInput placeholder="Business Registration Number" formControlName="businessRegistrationNo">
                        </mat-form-field>
                    </div>
        
                    <!-- Contact Person  -->
                    <div class="col-xl-12 d-flex align-items-center">
                        <mat-form-field [appearance]="apperance" class="full-width">
                            <!-- <mat-label>Contact Person</mat-label> -->
                            <input matInput placeholder="Contact Person" formControlName="contactPerson">
                            <mat-hint>Kavanii will contact this person for any information</mat-hint>
                        </mat-form-field>
                    </div>
                </div>

                <mat-accordion>
                    <mat-expansion-panel expanded="true">
                        <mat-expansion-panel-header>
                            <mat-panel-title>
                              Business Address
                            </mat-panel-title>
                            <mat-panel-description>
                              Required
                            </mat-panel-description>
                        </mat-expansion-panel-header>

                        <!-- Address details -->
                        <div class="row pt-2 pb-2">
                            
                            <div class="col-xl-12">
                                <mat-form-field [appearance]="apperance" class="full-width">
                                    <!-- <mat-label>Address 1</mat-label> -->
                                    <input matInput placeholder="Address 1" formControlName="address1">
                                </mat-form-field>
                            </div>
                            <div class="col-xl-12">
                                <mat-form-field [appearance]="apperance" class="full-width">
                                    <!-- <mat-label>Address 2</mat-label> -->
                                    <input matInput placeholder="Address 2" formControlName="address2">
                                </mat-form-field>
                            </div>
                            <div class="col-xl-12">
                                <mat-form-field [appearance]="apperance" class="full-width">
                                    <mat-label>City</mat-label>
                                    <mat-select formControlName="city">
                                        <mat-option value="Sydney">
                                            Sydney
                                        </mat-option>
                                        <mat-option value="Melbourne">
                                            Melbourne
                                        </mat-option>
                                    </mat-select>
                                </mat-form-field>
                            </div>
                            <div class="col-xl-6">
                                <mat-form-field [appearance]="apperance" class="full-width">
                                    <mat-label>State</mat-label>
                                    <mat-select formControlName="state">
                                        <mat-option value="ACT">
                                            ACT
                                        </mat-option>
                                        <mat-option value="NSW">
                                            NSW
                                        </mat-option>
                                    </mat-select>
                                </mat-form-field>
                            </div>
                            
                            <div class="col-xl-6">
                                <mat-form-field [appearance]="apperance" class="full-width">
                                    <!-- <mat-label>Post code</mat-label> -->
                                    <input matInput placeholder="Post code" formControlName="postCode">
                                </mat-form-field>
                            </div>

                            <div class="col-xl-12">
                                <mat-form-field [appearance]="apperance" class="full-width">
                                    <mat-label>Country</mat-label>
                                    <!-- <input matInput placeholder="Country" formControlName="country"> -->
                                    <mat-select formControlName="country">
                                        <mat-option *ngFor="let c of countries | orderBy: 'country_Name'" [value]="c.country_Name">
                                          {{ c.country_Name }}
                                        </mat-option>
                                      </mat-select>
                                </mat-form-field>
                            </div>
                        </div>
        
                    </mat-expansion-panel>
                </mat-accordion>

                <mat-accordion>
                    <mat-expansion-panel expanded="true">
                        <mat-expansion-panel-header>
                            <mat-panel-title>
                              Bank details
                            </mat-panel-title>
                            <mat-panel-description>
                              Required
                            </mat-panel-description>
                        </mat-expansion-panel-header>
                        <div class="row">
                            <!-- Bank Name  -->
                            <div class="col-xl-12 d-flex align-items-center">
                                <mat-form-field [appearance]="apperance" class="full-width">
                                    <!-- <mat-label>Bank Name</mat-label> -->
                                    <input matInput placeholder="Bank Name" formControlName="bankName">
                                </mat-form-field>
                            </div>
                            <!-- BSB Number  -->
                            <div class="col-xl-12 d-flex align-items-center">
                                <mat-form-field [appearance]="apperance" class="full-width">
                                    <!-- <mat-label>BSB Number</mat-label> -->
                                    <input matInput placeholder="BSB Number" formControlName="bsbNumber">
                                </mat-form-field>
                            </div>
        
                            <!-- Account Number  -->
                            <div class="col-xl-12 d-flex align-items-center">
                                <mat-form-field [appearance]="apperance" class="full-width">
                                    <!-- <mat-label>Account Number</mat-label> -->
                                    <input matInput placeholder="Account Number" formControlName="accountNumber">
                                </mat-form-field>
                            </div>
        
                            <!-- Invoice Terms  -->
                            <div class="col-xl-12 d-flex align-items-center">
                                <mat-form-field [appearance]="apperance" class="full-width">
                                    <!-- <mat-label>Invoice Terms</mat-label> -->
                                    <textarea matInput placeholder="Invoice Terms" formControlName="invoiceTerms" rows="3"></textarea>
                                </mat-form-field>
                            </div>
        
                            <!-- Notes  -->
                            <div class="col-xl-12 d-flex align-items-center">
                                <mat-form-field [appearance]="apperance" class="full-width">
                                    <!-- <mat-label>Notes</mat-label> -->
                                    <textarea matInput placeholder="Notes" formControlName="notes" rows="3"></textarea>
                                </mat-form-field>
                            </div>
                        </div>
                    </mat-expansion-panel>
                </mat-accordion>
                
            </div>
            <div class="col-xl-3">
                <div class="col-xl-12 text-right">
                    <!-- <mat-button-toggle-group #group="matButtonToggleGroup" formControlName="status">
                        <mat-button-toggle value="active" color="warn">
                            <mat-icon>check_circle_outline</mat-icon>
                            Active
                            </mat-button-toggle>
                            <mat-button-toggle value="inactive" color="warn">
                            Inactive
                        </mat-button-toggle>
                    </mat-button-toggle-group> -->
                    <kendo-switch formControlName="status"
                        [onLabel]="'Active'"
                        [offLabel]="'Inactive'"
                        class="mt-3 mb-3"
                    ></kendo-switch>
                    <mat-divider></mat-divider>
                </div>
                

                <!-- <div class="col-xl-12 d-flex align-items-center">
                    <h5>
                        Calendar Options
                    </h5>
                </div> -->
                
                <!-- Timezone -->
                <!-- <div class="col-xl-12 d-flex align-items-center mt-3">
                    <mat-form-field [appearance]="apperance" class="full-width">
                        <mat-label>Timezone</mat-label>
                        <mat-select  formControlName="timeZone">
                            <mat-option value="AEST">
                                AEST GMT +10
                            </mat-option>
                        </mat-select>
                    </mat-form-field>
                </div> -->

                <h4 class="mt-3 mb-3 bold d-flex align-items-center">
                    <mat-icon>access_time</mat-icon>
                    Trading hours
                </h4>
                <!-- Business Start Time -->
                <div class="col-xl-12 d-flex align-items-center">
                    <div class="col-sm-6">
                        <b>Business Start Time:</b>
                    </div>
                    
                    <kendo-timepicker formControlName="startTime" [steps]="steps" class="ml-3"></kendo-timepicker>
                </div>

                <!-- Business End Time -->
                <div class="col-xl-12 d-flex align-items-center mt-3">
                    <div class="col-sm-6">
                        <b>Business End Time:</b>
                    </div>
                    <kendo-timepicker formControlName="endTime" [steps]="steps" class="ml-3"></kendo-timepicker>
                </div>

                

                <!-- Time slot-->
                <!-- <div class="col-xl-12 d-flex align-items-center mt-3">
                    <mat-form-field [appearance]="apperance" class="full-width">
                        <mat-label>Time slot</mat-label>
                        <mat-select  formControlName="timeSlot">
                            <mat-option value="5">
                                5 mins
                            </mat-option>
                            <mat-option value="10">
                                10 mins
                            </mat-option>
                            <mat-option value="15">
                                15 mins
                            </mat-option>
                            <mat-option value="20">
                                20 mins
                            </mat-option>
                            <mat-option value="30">
                                30 mins
                            </mat-option>
                        </mat-select>
                    </mat-form-field>
                </div> -->

                <!-- Time slot Size -->
                <!-- <div class="col-xl-12 d-flex align-items-center">
                    <mat-form-field [appearance]="apperance" class="full-width">
                        <mat-label>Time slot Size</mat-label>
                        <mat-select formControlName="timeSlotSize">
                            <mat-option value="Small">
                                Small
                            </mat-option>
                            <mat-option value="Medium">
                                Medium
                            </mat-option>
                            <mat-option value="Default">
                                Default
                            </mat-option>
                            <mat-option value="Large">
                                Large
                            </mat-option>
                            <mat-option value="Big">
                                Big
                            </mat-option>
                        </mat-select>
                    </mat-form-field>
                </div> -->

                <!-- Calendar Color -->
                <!-- <div class="col-xl-12 d-flex align-items-center">
                    <div class="col-sm-6">
                        <b class="mr-3">Calendar color:</b>
                    </div>
                    <kendo-colorpicker formControlName="calendarColor"></kendo-colorpicker>
                </div> -->

                <!-- Double Booking -->
                <!-- <div class="col-xl-12 d-flex align-items-center mt-3">
                    <div class="col-sm-6">
                        <b>Double Booking</b>
                    </div>
                    <kendo-switch formControlName="isDoubleBooking"></kendo-switch>
                </div> -->

                <!-- Patient Online Bookings -->
                <!-- <div class="col-xl-12 d-flex align-items-center mt-3">
                    <div class="col-sm-6">
                        <b>Patient Online Bookings</b>
                    </div>
                    <kendo-switch formControlName="isPatientOnlineBooking"></kendo-switch>
                </div> -->

            </div>
        </div>
    </form>
</div>



<div class="text-right control-row">
    <mat-divider class="ml-5 mr-5"></mat-divider>
    <div class="pt-3">
        <button mat-stroked-button color="accent" class="mr-3" (click)="cancel();">Cancel</button>
        <button mat-raised-button color="accent" class="mr-5 wide" (click)="createBusiness();" [disabled]="businessForm.invalid || submitting">
            <span *ngIf="!submitting">Save</span>
            <span *ngIf="submitting">Saving...</span>
            <!-- <mat-spinner class="spinner" diameter="15" *ngIf="submitting"></mat-spinner> -->
        </button>
    </div>
</div>  